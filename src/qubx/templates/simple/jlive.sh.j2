#!/bin/bash
# {{ strategy_name }} - Live Trading Script
# 
# IMPORTANT: Configure accounts.toml with your API credentials before running!
# This script runs the strategy in LIVE mode - real money will be traded!

set -e

echo "ğŸš€ Starting {{ strategy_name }} in LIVE mode..."
echo "âš ï¸  WARNING: This will execute real trades with real money!"
echo ""

# Check if accounts.toml exists
if [ ! -f "accounts.toml" ]; then
    echo "âŒ Error: accounts.toml not found!"
    echo "ğŸ“ Please configure your API credentials in accounts.toml before running live trading."
    echo "ğŸ’¡ See accounts.toml template for configuration format."
    exit 1
fi

# Check if accounts.toml has placeholder values
if grep -q "your_api_key_here\|your_secret_here" accounts.toml; then
    echo "âŒ Error: accounts.toml contains placeholder values!"
    echo "ğŸ“ Please replace 'your_api_key_here' and 'your_secret_here' with actual credentials."
    exit 1
fi

echo "âœ… Found accounts.toml configuration"
echo ""

# Confirm live trading
read -p "ğŸ”´ Are you sure you want to start LIVE trading? Type 'yes' to continue: " confirm
if [ "$confirm" != "yes" ]; then
    echo "âŒ Live trading cancelled."
    exit 0
fi

echo ""
echo "ğŸ”´ Starting LIVE trading with Jupyter interface..."
poetry run qubx run config.yml --jupyter

echo ""
echo "ğŸ›‘ Live trading session ended."